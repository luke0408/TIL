"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1976],{8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>c});var s=t(6540);const r={},l=s.createContext(r);function i(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(l.Provider,{value:n},e.children)}},8624:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>x,frontMatter:()=>i,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"Backend/NestJS/Request_Lifecycle","title":"NestJS Request Lifecycle","description":"Summary","source":"@site/docs/Backend/NestJS/Request_Lifecycle.mdx","sourceDirName":"Backend/NestJS","slug":"/Backend/NestJS/Request_Lifecycle","permalink":"/TIL/en/docs/Backend/NestJS/Request_Lifecycle","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docs","next":{"title":"Semantic Versioning","permalink":"/TIL/en/docs/Backend/npm/Semantic_version"}}');var r=t(4848),l=t(8453);const i={},c="NestJS Request Lifecycle",a={},o=[{value:"Summary",id:"summary",level:2},{value:"Details",id:"details",level:2},{value:"\uc694\uccad \uc218\uba85 \uc8fc\uae30\uc758 \uc8fc\uc694 \ub2e8\uacc4",id:"\uc694\uccad-\uc218\uba85-\uc8fc\uae30\uc758-\uc8fc\uc694-\ub2e8\uacc4",level:3},{value:"\uc694\uccad \uc218\uba85 \uc8fc\uae30 \ub2e4\uc774\uc5b4\uadf8\ub7a8",id:"\uc694\uccad-\uc218\uba85-\uc8fc\uae30-\ub2e4\uc774\uc5b4\uadf8\ub7a8",level:3},{value:"Reference",id:"reference",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"nestjs-request-lifecycle",children:"NestJS Request Lifecycle"})}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:"NestJS\uc758 \uc694\uccad \uc218\uba85 \uc8fc\uae30\ub294 \uc694\uccad\uc774 \uc11c\ubc84\ub85c \ub4e4\uc5b4\uc640 \ucc98\ub9ac\ub41c \ud6c4 \uc751\ub2f5\uc774 \ubc18\ud658\ub420 \ub54c\uae4c\uc9c0\uc758 \ud750\ub984\uc744 \ub098\ud0c0\ub0b8\ub2e4. \uc774 \uacfc\uc815\uc740 \uc5ec\ub7ec \ud575\uc2ec \uad6c\uc131 \uc694\uc18c(\ubbf8\ub4e4\uc6e8\uc5b4, \uac00\ub4dc, \uc778\ud130\uc149\ud130, \ud30c\uc774\ud504, \ucee8\ud2b8\ub864\ub7ec, \uc11c\ube44\uc2a4, \uc608\uc678 \ud544\ud130)\ub97c \uac70\uce58\uba70 \uc694\uccad\uacfc \uc751\ub2f5\uc744 \uc870\uc791\ud560 \uc218 \uc788\ub2e4."}),"\n",(0,r.jsx)(n.h2,{id:"details",children:"Details"}),"\n",(0,r.jsx)(n.h3,{id:"\uc694\uccad-\uc218\uba85-\uc8fc\uae30\uc758-\uc8fc\uc694-\ub2e8\uacc4",children:"\uc694\uccad \uc218\uba85 \uc8fc\uae30\uc758 \uc8fc\uc694 \ub2e8\uacc4"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\ubbf8\ub4e4\uc6e8\uc5b4 (Middleware)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uc694\uccad\uc774 \ucee8\ud2b8\ub864\ub7ec\uc5d0 \ub3c4\ub2ec\ud558\uae30 \uc804\uc5d0 \uc2e4\ud589\ub428"}),"\n",(0,r.jsx)(n.li,{children:"\ub85c\uae45, \uc778\uc99d, \uc694\uccad \ubcc0\ud658 \ub4f1\uc758 \uc791\uc5c5 \uc218\ud589"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"next()"})," \ud638\ucd9c\uc744 \ud1b5\ud574 \ub2e4\uc74c \ub2e8\uacc4\ub85c \uc804\ub2ec"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"@Injectable()\nexport class LoggerMiddleware implements NestMiddleware {\n  use(req: Request, res: Response, next: NextFunction) {\n    console.log(`[${new Date().toISOString()}] ${req.method} ${req.url}`);\n    next();\n  }\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\uac00\ub4dc (Guard)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uc694\uccad\uc774 \ud2b9\uc815 \ub77c\uc6b0\ud2b8\uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\ub294\uc9c0 \uc5ec\ubd80\ub97c \uacb0\uc815"}),"\n",(0,r.jsx)(n.li,{children:"\uc8fc\ub85c \uc778\uc99d \ubc0f \uad8c\ud55c \uac80\uc99d\uc5d0 \uc0ac\uc6a9\ub428"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"@Injectable()\nexport class AuthGuard implements CanActivate {\n  canActivate(context: ExecutionContext): boolean {\n    const request = context.switchToHttp().getRequest();\n    return validateRequest(request);\n  }\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\uc778\ud130\uc149\ud130 (Interceptor)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uc694\uccad \ubc0f \uc751\ub2f5\uc744 \ubcc0\ud658\ud558\uac70\ub098 \ub85c\uae45, \uba54\ud0c0\ub370\uc774\ud130 \ucd94\uac00 \ub4f1\uc758 \uc791\uc5c5 \uc218\ud589"}),"\n",(0,r.jsx)(n.li,{children:"\uba54\uc11c\ub4dc \uc2e4\ud589 \uc804\ud6c4 \ub85c\uc9c1\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc74c"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"@Injectable()\nexport class TransformInterceptor implements NestInterceptor {\n  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {\n    return next.handle().pipe(map((data) => ({data})));\n  }\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\ud30c\uc774\ud504 (Pipe)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uc694\uccad \ub370\uc774\ud130\uc758 \uc720\ud6a8\uc131\uc744 \uac80\uc0ac\ud558\uac70\ub098 \ubcc0\ud658\uc744 \uc218\ud589"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"@Injectable()\nexport class ValidationPipe implements PipeTransform {\n  transform(value: any, metadata: ArgumentMetadata) {\n    if (!value) {\n      throw new BadRequestException('Validation failed');\n    }\n    return value;\n  }\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\ucee8\ud2b8\ub864\ub7ec (Controller)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ud074\ub77c\uc774\uc5b8\ud2b8\uc758 \uc694\uccad\uc744 \ucc98\ub9ac\ud558\uace0 \uc751\ub2f5\uc744 \uc0dd\uc131\ud558\ub294 \uc5ed\ud560"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"@Controller('cats')\nexport class CatsController {\n  @Get()\n  findAll(): string {\n    return 'This action returns all cats';\n  }\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\uc11c\ube44\uc2a4 (Service)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc744 \ucc98\ub9ac\ud558\uba70 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubc0f \uc678\ubd80 API\uc640 \uc0c1\ud638\uc791\uc6a9"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"@Injectable()\nexport class CatsService {\n  private readonly cats: Cat[] = [];\n\n  findAll(): Cat[] {\n    return this.cats;\n  }\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\uc608\uc678 \ud544\ud130 (Exception Filter)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ub0b4\uc5d0\uc11c \ubc1c\uc0dd\ud55c \uc608\uc678\ub97c \ucc98\ub9ac"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"@Catch(HttpException)\nexport class HttpExceptionFilter implements ExceptionFilter {\n  catch(exception: HttpException, host: ArgumentsHost) {\n    const ctx = host.switchToHttp();\n    const response = ctx.getResponse();\n    const status = exception.getStatus();\n\n    response.status(status).json({\n      statusCode: status,\n      timestamp: new Date().toISOString(),\n      path: request.url,\n    });\n  }\n}\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\uc694\uccad-\uc218\uba85-\uc8fc\uae30-\ub2e4\uc774\uc5b4\uadf8\ub7a8",children:"\uc694\uccad \uc218\uba85 \uc8fc\uae30 \ub2e4\uc774\uc5b4\uadf8\ub7a8"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph TD\n    A[Client Request] --\x3e|Middleware| B[Middleware Processing]\n    B --\x3e|Guard| C[Authorization Guard Check]\n    C --\x3e|Interceptor| D[Request Interception]\n    D --\x3e|Pipe| E[Validation & Transformation]\n    E --\x3e|Controller| F[Controller Processing]\n    F --\x3e|Service| G[Business Logic Execution]\n    G --\x3e|Controller Response| H[Controller Returns Data]\n    H --\x3e|Interceptor| I[Response Interception]\n    I --\x3e|Client Response| J[Final Response Sent]\n    H -.->|Exception Occurred| K[Exception Filter Handling]\n    K --\x3e J;"}),"\n",(0,r.jsx)(n.h2,{id:"reference",children:"Reference"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"link:"})," External reference"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.nestjs.com/faq/request-lifecycle",children:"NestJS \uacf5\uc2dd \ubb38\uc11c - Request Lifecycle"})}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);